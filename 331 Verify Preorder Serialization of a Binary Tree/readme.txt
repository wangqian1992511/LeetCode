001.cpp (4ms):

Simulate the tree recovery with DFS.