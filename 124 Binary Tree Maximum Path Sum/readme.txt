001.cpp (32ms):

During the DFS, for each node, we should calculate the maximum path using that node as an ending or an transferring node.